

<h1>Asynchronous Jetty+CFX Web Services Demo</h1>
<p>
This demonstration shows how the proposed servlet 3.0 asynchronous 
API (inspired by Jetty continuations) can be used to greatly 
improve web services.
</p>
<p>
This demo calls the EBay WS API both synchronously and asynchronously,
to obtain 100 items matching each of the keywords passed on the query
string.
</p>
<p>
The 
<a
href="https://svn.codehaus.org/jetty/jetty/trunk/modules/examples/test-ws-cxf/src/main/java/org/mortbay/cxf/continuation/AggregateSerialCXFServlet.java">synchronous
servlet</a>, a ws call is made for each keyword and the thread servicing the
web request blocks waiting for each ws response before making the next
request.

</p>
<p>

The <a
href="https://svn.codehaus.org/jetty/jetty/trunk/modules/examples/test-ws-cxf/src/main/java/org/mortbay/cxf/continuation/AggregateAsyncCXFServlet.java">
Asynchronous Servlet
</a> initiates an async CFX webservice to for all keywords in parallel, and
then uses the Servlet 3.0 suspend call to return the thread to the thread
pool. The CFX async call backs check to see if all callbacks are complete and
if so, the request is resumed.

</p>
<p>
The table below shows two iframes, each with a 5 keyword query. The first is asynchronous and the
second is synchronous.  The first load will be a bit slow for both, as CXF is initialized.  Use reload 
to get new timings
</p>


<table width='90%' border=1 cellpadding=5 cellspacing=0>
<tr>
<th>Synchronous</th>
<th>Asynchronous</th>
</tr>
<tr>
<td><a href="/testSerial?items=mouse,cheese,beer,mac,gnome">mouse,cheese,beer,mac,gnome</a></td>
<td><a href="/testAsync?items=mouse,cheese,beer,mac,gnome">mouse,cheese,beer,mac,gnome</a></td>
</tr>
<tr>
<td>
  <iframe id="f1" width='100%' height='400px' src="/testSerial?items=mouse,cheese,beer,mac,gnome"></iframe>
</td>
<td>
  <iframe id="f2" width='100%' height='400px' src="/testAsync?items=mouse,cheese,beer,mac,gnome"/></iframe>
</td>
</tr>
</table>

</p>
  
